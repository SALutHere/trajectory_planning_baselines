# Trajectory Planning Baselines

Данный проект предоставляет исследовательский фреймворк для сравнения алгоритмов планирования траекторий роботизированной платформы в статической среде производственного цеха. Проект разработан для использования в исследовательских работах, дипломах и статьях по робототехнике, промышленной автоматизации и навигации мобильных платформ.

---

## Основные возможности

✅ Реализация множества алгоритмов планирования пути

✅ Поддержка нескольких сценариев карты

✅ Гибкая параметризация при запуске

✅ Многократные прогоны

✅ Автоматическое сохранение результатов в CSV

✅ Визуализация траекторий

✅ Простое расширение набора алгоритмов и сценариев

---

## Структура проекта

```
trajectory_planning_baselines/
├── algorithms/          # Алгоритмы планирования
├── core/                # Основная логика экспериментов
├── scenarios/           # Генераторы карт
├── visualize/           # Визуализация результатов
├── output/              # Генерируемые результаты (CSV + изображения)
├── run_experiment.py    # Один прогон
├── run_batch.py         # Несколько прогонов
├── run_all.py           # Прогоны для всех сценариев
└── README.md
```

---

## Реализованные алгоритмы

| Имя      | Описание                                     |
| -------- | -------------------------------------------- |
| Dijkstra | Базовый поиск кратчайшего пути               |
| A*       | Эвристический поиск                          |
| Greedy   | Быстрый, не оптимальный                      |
| Theta*   | Сглаженный A*, использующий прямую видимость |
| PRM      | Probabilistic Roadmap                        |


> Алгоритмы D* не включены, поскольку задача статична.

---

## Реализованные сценарии

| Имя             | Описание                        |
| --------------- | ------------------------------- |
| random_grid     | Случайная сетка с препятствиями |
| maze_grid       | Лабиринт                        |
| warehouse_grid  | Стеллажи и проходы (цех/склад)  |
| narrow_passages | Узкие туннели                   |

Все сценарии поддерживают параметризацию (width, height, seed и др.).

---

## Установка

```bash
git clone https://github.com/SALutHere/trajectory_planning_baselines.git
cd trajectory_planning_baselines
python -m venv .venv
source .venv/bin/activate     # Linux / macOS
.venv\Scripts\activate        # Windows
pip install -r requirements.txt
```

---

## Запуск экспериментов

### 1) Один прогон

```
python run_experiment.py <scenario> [параметры]
```

Пример:

```
python run_experiment.py random_grid --width 60 --height 60 --seed 42
```

### 2) Серия прогонов

```
python run_batch.py <scenario> --runs N [параметры]
```

Пример:

```
python run_batch.py warehouse_grid --runs 20 --width 100 --height 80
```

### 3) Все сценарии

```
python run_all.py --runs N [параметры]
```

Пример:

```
python run_all.py --runs 10 --width 80 --height 80
```

> ⚠ Важно  
При каждом запуске скриптов `run_experiment.py`, `run_batch.py` и `run_all.py`
директория `output/` автоматически полностью очищается.
Это гарантирует, что результаты каждого запуска независимые и не смешиваются.


---

## Параметры CLI

| Параметр          | Описание                                  |
| ----------------- | ----------------------------------------- |
| `--width`         | Ширина карты                              |
| `--height`        | Высота карты                              |
| `--seed`          | Сид генерации                             |
| `--obstacle_prob` | Вероятность препятствия (для random_grid) |
| `--runs`          | Кол-во запусков (run_batch, run_all)      |
| `--run_id`        | Идентификатор запуска (run_experiment)    |

Если параметр не указан, используется значение по умолчанию.

---

## Результаты

Все результаты автоматически сохраняются в директорию `output/`:

```
output/
└── <scenario>/
    ├── <scenario>.csv        # сводная статистика
    ├── run_0/
    │   ├── AStar.png
    │   ├── RRT.png
    │   └── all.png
    ├── run_1/
    └── ...
```

Каждый запуск очищает директорию `output/`, поэтому она
всегда содержит только результаты последнего прогона.


### Статистика (CSV)

Каждая строка — результат работы одного алгоритма в одном прогоне:

| Поле      | Описание           |
| --------- | ------------------ |
| run_id    | номер прогона      |
| scenario  | имя сценария       |
| algorithm | имя алгоритма      |
| time_ms   | время работы       |
| success   | был ли найден путь |
| path_len  | длина пути         |
| start_x   | начальная точка X  |
| start_y   | начальная точка Y  |
| goal_x    | целевая точка X    |
| goal_y    | целевая точка Y    |

---

## Визуализация

На каждый прогон создаются изображения:

* `AStar.png` — путь через A*
* `RRT.png` — путь через RRT
* `all.png` — сравнение всех путей

---

## Как добавить новый алгоритм

1. Создать файл в `algorithms/`
2. Наследовать класс `Planner`
3. Реализовать метод `plan(grid, start, goal)`
4. Зарегистрировать декоратором `@register_planner`
5. Указать в `algorithms/__init__.py`

После этого алгоритм автоматически попадёт в:

* прогоны
* визуализацию
* CSV

---

## Как добавить новый сценарий

1. Создать файл в `scenarios/`
2. Наследовать класс `Scenario`
3. Реализовать `generate() → (Grid, start, goal)`
4. Зарегистрировать через `@register_scenario`
5. Указать в `scenarios/__init__.py`

Сценарий автоматически появится во всех вариантах запуска.

---

## Лицензия

MIT

---

## Контакты

Если вы используете данный проект в исследовании или дипломе, буду рад обратной связи.
